{% extends "_base.html" %}

{% load static %}
{% load humanize %}

{% block title %}Authors{% endblock title %}

{% block additional_includes %}
  <link rel="stylesheet" href="{% static 'themes/' %}{{ user.get_theme_name }}/css/authors/author-list.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/2.0.5/css/dataTables.dataTables.css">
{% endblock additional_includes %}

{% block content %}

<table id="authors-table" class="compact hover">
    <thead>
        <tr>
            <th>Name</th>
            <th>Birth date</th>
            <th>Death date</th>
            <th>Shelved books</th>
            <th>Average rating</th>
            <th>Ratings count</th>
            <th>Reviews count</th>
            <th>Genres</th>
        </tr>
    </thead>
    <tbody>
        {% for author in author_list %}
        <tr>
            <td>
                <a href="{% url 'author_detail' author.author_id %}">
                    {{ author.name }}
                </a>
            </td>
            <td>
                    {{ author.birth_date }}
            </td>
            <td>
                    {{ author.death_date }}
            </td>
            <td class="dt-right">
                {{ author.book_count|default:"0" }}
            </td>
            <td class="dt-right">
                {{ author.avg_rating|default_if_none:"â€“" }}
            </td>
            <td class="dt-right">
                {{ author.ratings_count|intcomma }}
            </td>
            <td class="dt-right">
                {{ author.reviews_count|intcomma }}
            </td>
            <td>
                {% if author.genres %}
                    {% for genre in author.genres %}
                        <span class="tag">{{ genre }}</span>
                    {% endfor %}
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8" style="text-align:center;">No authors found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock content %}

{% block scripts %}
        {{ block.super }}
        <link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-1.13.8/date-1.5.1/datatables.min.css" rel="stylesheet">
        <script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-1.13.8/date-1.5.1/datatables.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
        <script src="{% static 'themes/' %}{{ user.get_theme_name }}/js/authors/author-list.js"></script>
{% endblock %}

